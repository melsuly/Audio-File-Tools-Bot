# Audio Tools Bot

Телеграм-бот на Telegraf, который принимает аудиофайлы и возвращает их в формате голосового сообщения без подписи.

## Возможности
- Принимает файлы в формате `audio` и `document`, если MIME-тип относится к аудио.
- Понимает таймкоды в подписи сообщения в формате `0:40` и обрезает аудио по указанному промежутку (секунды от начала и конца).
- Конвертирует аудио в OGG/Opus (требования Telegram к голосовым сообщениям).
- Возвращает готовое voice-сообщение без дополнительного текста.

## Требования
- Node.js 18 или новее.
- `ffmpeg`. Используется [`ffmpeg-static`](https://www.npmjs.com/package/ffmpeg-static), поэтому отдельная установка не нужна.

## Запуск
1. Установите зависимости:
   ```bash
   npm install
   ```
2. Скопируйте файл окружения и укажите токен бота:
   ```bash
   cp .env.example .env
   # отредактируйте .env и добавьте токен BotFather: BOT_TOKEN=...
   ```
3. Запустите бота:
   ```bash
   npm start
   ```

При использовании `npm run dev` бот будет перезапускаться при изменении файлов (Node.js 18+).

## Использование таймкодов
- Добавьте к аудио подпись в формате `начало:конец`, например `0:40` или `10:55`.
- Числа интерпретируются как секунды. Бот обрежет аудио от `начало` включительно до `конец` исключительно и отправит только нужный фрагмент голосовым сообщением.
- Если таймкоды не указаны, возвращается всё аудио целиком.

## Структура
- `src/bot.js` — основная логика бота и конвертации аудио.
- `.env` — переменные окружения (не коммитить), используется только `BOT_TOKEN`.

## Разработка
- В случае ошибок бот пишет сообщение пользователю и логирует детали в консоль.
- Временные файлы создаются в системной директории `tmp` и удаляются после отправки голосового сообщения.
